<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Android,Easemob,SDK,IM,Log,Hyphenate," />





  <link rel="alternate" href="/blog/atom.xml" title="lz's Notes" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/blog/images/favicon.ico?v=5.1.0" />






<meta name="description" content="æˆ‘çš„ç®€ä¹¦ï¼šã€lzan13 / å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æã€‘

å‰è¨€é¦–å…ˆè¯´ä¸‹ç¯ä¿¡æ—¥å¿—ä¿å­˜çš„æœºåˆ¶ï¼Œè¿™è¾¹åªè¦æ˜¯åœ¨å¼€å¯äº†SDKçš„Debugæ¨¡å¼ä¸‹è°ƒç”¨ç¯ä¿¡çš„EMLog.d()æ–¹æ³•è¾“å‡ºçš„æ—¥å¿—ï¼Œæ—¥å¿—å†…å®¹éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºçš„åŒæ—¶è®°å½•åˆ°è®¾å¤‡çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼›
è¿™é‡Œå°±ä¸€äº›å¸¸è§çš„æ—¥å¿—è·Ÿå¤§å®¶ç•¥å¾®è§£é‡Šä¸‹ï¼Œä¸€è¾¹èƒ½ç»™å¤§å®¶åœ¨ä»¥åæ’æŸ¥é—®é¢˜ä¸­èµ·åˆ°ä¸€äº›å¸®åŠ©ï¼›

PSï¼šè¿™é‡Œæ‰€åˆ—å‡ºæ¥çš„æ—¥å¿—å†…å®¹åªæ˜¯ç‰¹å®šæƒ…å†µæµ‹è¯•ä¸‹å‡ºç°ï¼Œåœ¨ä¸åŒçš„è®¾å¤‡ï¼Œä¸åŒç¯">
<meta property="og:type" content="article">
<meta property="og:title" content="å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ">
<meta property="og:url" content="http://melove.net/2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html">
<meta property="og:site_name" content="lz's Notes">
<meta property="og:description" content="æˆ‘çš„ç®€ä¹¦ï¼šã€lzan13 / å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æã€‘

å‰è¨€é¦–å…ˆè¯´ä¸‹ç¯ä¿¡æ—¥å¿—ä¿å­˜çš„æœºåˆ¶ï¼Œè¿™è¾¹åªè¦æ˜¯åœ¨å¼€å¯äº†SDKçš„Debugæ¨¡å¼ä¸‹è°ƒç”¨ç¯ä¿¡çš„EMLog.d()æ–¹æ³•è¾“å‡ºçš„æ—¥å¿—ï¼Œæ—¥å¿—å†…å®¹éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºçš„åŒæ—¶è®°å½•åˆ°è®¾å¤‡çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼›
è¿™é‡Œå°±ä¸€äº›å¸¸è§çš„æ—¥å¿—è·Ÿå¤§å®¶ç•¥å¾®è§£é‡Šä¸‹ï¼Œä¸€è¾¹èƒ½ç»™å¤§å®¶åœ¨ä»¥åæ’æŸ¥é—®é¢˜ä¸­èµ·åˆ°ä¸€äº›å¸®åŠ©ï¼›

PSï¼šè¿™é‡Œæ‰€åˆ—å‡ºæ¥çš„æ—¥å¿—å†…å®¹åªæ˜¯ç‰¹å®šæƒ…å†µæµ‹è¯•ä¸‹å‡ºç°ï¼Œåœ¨ä¸åŒçš„è®¾å¤‡ï¼Œä¸åŒç¯">
<meta property="og:updated_time" content="2017-03-17T11:29:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ">
<meta name="twitter:description" content="æˆ‘çš„ç®€ä¹¦ï¼šã€lzan13 / å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æã€‘

å‰è¨€é¦–å…ˆè¯´ä¸‹ç¯ä¿¡æ—¥å¿—ä¿å­˜çš„æœºåˆ¶ï¼Œè¿™è¾¹åªè¦æ˜¯åœ¨å¼€å¯äº†SDKçš„Debugæ¨¡å¼ä¸‹è°ƒç”¨ç¯ä¿¡çš„EMLog.d()æ–¹æ³•è¾“å‡ºçš„æ—¥å¿—ï¼Œæ—¥å¿—å†…å®¹éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºçš„åŒæ—¶è®°å½•åˆ°è®¾å¤‡çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼›
è¿™é‡Œå°±ä¸€äº›å¸¸è§çš„æ—¥å¿—è·Ÿå¤§å®¶ç•¥å¾®è§£é‡Šä¸‹ï¼Œä¸€è¾¹èƒ½ç»™å¤§å®¶åœ¨ä»¥åæ’æŸ¥é—®é¢˜ä¸­èµ·åˆ°ä¸€äº›å¸®åŠ©ï¼›

PSï¼šè¿™é‡Œæ‰€åˆ—å‡ºæ¥çš„æ—¥å¿—å†…å®¹åªæ˜¯ç‰¹å®šæƒ…å†µæµ‹è¯•ä¸‹å‡ºç°ï¼Œåœ¨ä¸åŒçš„è®¾å¤‡ï¼Œä¸åŒç¯">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://melove.net/2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html"/>





  <title> å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ | lz's Notes </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">lz's Notes</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">æ…¢æ…¢æ¥ï¼Œä¸€æ­¥ä¸€ä¸ªè„šå°ï¼</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            åˆ†ç±»
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/blog/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            å…¬ç›Š404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://melove.net/blog/2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="lzan13">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/blog/images/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="lz's Notes">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="lz's Notes" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-17T19:16:04+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Develop/" itemprop="url" rel="index">
                    <span itemprop="name">Develop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>æˆ‘çš„ç®€ä¹¦ï¼šã€<a href="http://www.jianshu.com/u/f53bcbbc7c3e" target="_blank" rel="external">lzan13</a> / <a href="http://www.jianshu.com/p/a194fa19bd6a" target="_blank" rel="external">å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ</a>ã€‘</p>
</blockquote>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>é¦–å…ˆè¯´ä¸‹ç¯ä¿¡æ—¥å¿—ä¿å­˜çš„æœºåˆ¶ï¼Œè¿™è¾¹åªè¦æ˜¯åœ¨å¼€å¯äº†<code>SDK</code>çš„<code>Debug</code>æ¨¡å¼ä¸‹è°ƒç”¨ç¯ä¿¡çš„<code>EMLog.d()</code>æ–¹æ³•è¾“å‡ºçš„æ—¥å¿—ï¼Œæ—¥å¿—å†…å®¹éƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºçš„åŒæ—¶è®°å½•åˆ°è®¾å¤‡çš„æ—¥å¿—æ–‡ä»¶ä¸­ï¼›</p>
<p>è¿™é‡Œå°±ä¸€äº›å¸¸è§çš„æ—¥å¿—è·Ÿå¤§å®¶ç•¥å¾®è§£é‡Šä¸‹ï¼Œä¸€è¾¹èƒ½ç»™å¤§å®¶åœ¨ä»¥åæ’æŸ¥é—®é¢˜ä¸­èµ·åˆ°ä¸€äº›å¸®åŠ©ï¼›</p>
<blockquote>
<p>PSï¼šè¿™é‡Œæ‰€åˆ—å‡ºæ¥çš„æ—¥å¿—å†…å®¹åªæ˜¯ç‰¹å®šæƒ…å†µæµ‹è¯•ä¸‹å‡ºç°ï¼Œåœ¨ä¸åŒçš„è®¾å¤‡ï¼Œä¸åŒç¯å¢ƒä¸‹ç¨å¾®ä¼šæœ‰äº›å‡ºå…¥ï¼Œä¸è¿‡ä¸€äº›å…³é”®è¯çš„åœ°æ–¹éƒ½åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä¸è¦æ­»å¿ƒçœ¼å°±å¥½ï¼›</p>
</blockquote>
<h2 id="ç½‘ç»œç›¸å…³"><a href="#ç½‘ç»œç›¸å…³" class="headerlink" title="ç½‘ç»œç›¸å…³"></a>ç½‘ç»œç›¸å…³</h2><h3 id="SDK-çš„åˆå§‹åŒ–"><a href="#SDK-çš„åˆå§‹åŒ–" class="headerlink" title="SDK çš„åˆå§‹åŒ–"></a>SDK çš„åˆå§‹åŒ–</h3><p>SDK åˆå§‹åŒ–çš„æ—¶å€™ä¼šé¦–å…ˆæ£€æŸ¥ DNS é…ç½®ä¿¡æ¯æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåœ¨åˆå§‹åŒ–æ—¶ä¼šé¦–å…ˆè¯·æ±‚ DNS é…ç½®åˆ—è¡¨ï¼Œè¯·æ±‚æˆåŠŸåå°±ä¼šè¿”å›ä¸€ä¸ª<code>json</code>ä¸²ï¼Œ2.x æ˜¯<code>xml</code>æ ¼å¼å†…å®¹ï¼›å¦‚æœå½“å¯¹æ–¹çš„ç½‘ç»œæƒ…å†µæœ‰é—®é¢˜çš„æ—¶å€™ï¼Œè¿™ä¸€æ­¥å°±å¯ä»¥çœ‹å‡ºä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è¯·æ±‚ dns åˆ—è¡¨å¤±è´¥ç­‰</p>
<p>å…³é”®è¯ï¼š<code>getDnsListFromServer</code>,<code>parseDnsServer</code>,<code>dns_time</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 16:23:31:497]: =============EMChatClientImpl::init()==================</div><div class="line">[2017/3/1 16:23:31:497]: dns config mode is 1</div><div class="line">[2017/3/1 16:23:31:497]: EMConfigManager::init() </div><div class="line">[2017/3/1 16:23:31:497]: No config file, do nothing</div><div class="line">[2017/3/1 16:23:31:497]: addConnectionListener</div><div class="line">[2017/3/1 16:23:31:499]: =============== Call Manager init ===============</div><div class="line">[2017/3/1 16:23:31:499]: addConnectionListener</div><div class="line">[2017/3/1 16:23:31:506]: registerContactListener</div><div class="line">[2017/3/1 16:23:31:511]: restBaseUrl()</div><div class="line">[2017/3/1 16:23:31:511]: EMDNSManager::getCurrentHost: type: 2</div><div class="line">[2017/3/1 16:23:31:512]: EMSessionManager::checkDNS()</div><div class="line">[2017/3/1 16:23:31:512]: valid_time: </div><div class="line">[2017/3/1 16:23:31:512]: no saved dns list, download it</div><div class="line">[2017/3/1 16:23:31:514]: getDnsListFromServer()</div><div class="line">[2017/3/1 16:23:31:514]: buildUrl(): http://rs.easemob.com/easemob/server.json?sdk_version=3.2.3&amp;app_key=easemob-demo%23chatdemoui&amp;file_version=1</div><div class="line">[2017/3/1 16:23:31:631]: [EMARHttpAPI] httpExecute code: 200</div><div class="line">[2017/3/1 16:23:31:631]: 1 time retry</div><div class="line">[2017/3/1 16:23:31:631]: DNS List size: 2115</div><div class="line">[2017/3/1 16:23:31:631]: EMSessionManager::parseDnsServer: &#123;&quot;file_version&quot;:&quot;61&quot;,&quot;resolver&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;59.110.89.59&quot;&#125;,&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;112.126.66.111&quot;&#125;,&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.174.78&quot;&#125;,&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;116.62.83.103&quot;&#125;,&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;120.26.17.225&quot;&#125;,&#123;&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;120.26.15.207&quot;&#125;,&#123;&quot;protocol&quot;:&quot;https&quot;,&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;&#125;]&#125;,&quot;rest&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;protocol&quot;:&quot;https&quot;,&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;a1.easemob.com&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;a1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.159.193&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;a1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.228.160&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;a1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.0.214&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;a1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.4.52&quot;&#125;]&#125;,&quot;valid_before&quot;:&quot;1496085791&quot;,&quot;im&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;im1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.20.34&quot;&#125;,&#123;&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;im1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.20.117&quot;&#125;,&#123;&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;im1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.23.59&quot;&#125;,&#123;&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;im1.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.26.56&quot;&#125;]&#125;,&quot;deploy_name&quot;:&quot;easemob&quot;,&quot;tcp_resolver&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;59.110.89.59&quot;&#125;,&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;112.126.66.111&quot;&#125;,&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.174.78&quot;&#125;,&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;116.62.83.103&quot;&#125;,&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;120.26.17.225&quot;&#125;,&#123;&quot;port&quot;:&quot;2020&quot;,&quot;domain&quot;:&quot;rs.easemob.com&quot;,&quot;ip&quot;:&quot;120.26.15.207&quot;&#125;]&#125;,&quot;msync-im&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;port&quot;:&quot;6801&quot;,&quot;domain&quot;:&quot;msync-im1.easemob.com&quot;,&quot;ip&quot;:&quot;60.205.131.133&quot;&#125;,&#123;&quot;port&quot;:&quot;7830&quot;,&quot;domain&quot;:&quot;msync-im1.easemob.com&quot;,&quot;ip&quot;:&quot;60.205.109.58&quot;&#125;]&#125;,&quot;xmpp&quot;:&#123;&quot;hosts&quot;:[&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;80&quot;,&quot;domain&quot;:&quot;im-api.easemob.com&quot;,&quot;ip&quot;:&quot;im-api.easemob.com&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;5280&quot;,&quot;domain&quot;:&quot;im-api.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.159.193&quot;&#125;,&#123;&quot;protocol&quot;:&quot;http&quot;,&quot;port&quot;:&quot;5280&quot;,&quot;domain&quot;:&quot;im-api.easemob.com&quot;,&quot;ip&quot;:&quot;182.92.228.160&quot;&#125;,&#123;&quot;protocol&quot;:&quot;https&quot;,&quot;port&quot;:&quot;443&quot;,&quot;domain&quot;:&quot;im-api.easemob.com&quot;&#125;]&#125;,&quot;gcm_enabled&quot;:&quot;true&quot;&#125;</div><div class="line">[2017/3/1 16:23:31:631]: current time: 1488356611631</div><div class="line">[2017/3/1 16:23:31:631]: valid time: 1496085791000</div><div class="line">[2017/3/1 16:23:31:631]: saveConfigs()</div><div class="line">[2017/3/1 16:23:31:632]: write to config file: &#123;</div><div class="line">    &quot;dns_time&quot;:&quot;1496085791000&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="æ‰‹åŠ¨ç™»å½•"><a href="#æ‰‹åŠ¨ç™»å½•" class="headerlink" title="æ‰‹åŠ¨ç™»å½•"></a>æ‰‹åŠ¨ç™»å½•</h3><p>å½“è¿›è¡Œæ‰‹åŠ¨ç™»å½•æ˜¯ï¼Œä¼šé¦–å…ˆè·å– DNS é…ç½®ï¼Œï¼ˆä¸Šè¾¹åˆå§‹åŒ–æ—¶ä¸æ˜¯å·²ç»è·å–äº†ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜è¦è·å–ï¼Ÿå› ä¸º sdk å°±è¿™æ ·å†™çš„ï¼Œæ‰€ä»¥å®ƒåˆè·å–äº†ä¸€æ¬¡ğŸ˜“ï¼‰å¦‚æœä¸å­˜åœ¨å°±å»è·å–ï¼Œè·å–å¤±è´¥çš„æƒ…å†µä¸‹ä¼šè¿›è¡Œå¤šæ¬¡å°è¯•ï¼Œç„¶åè·å–å®Œæˆ DNS ä¹‹åå°±å¼€å§‹ç™»å½•äº†ï¼Œç™»å½•è¦åšçš„å°±æ˜¯è·å–è´¦æˆ·çš„ tokenï¼Œåç»­çš„æ“ä½œéƒ½æ˜¯æ ¹æ®è¿™ä¸ª token è¿›è¡Œæ“ä½œäº†</p>
<p>ä¸»è¦å…³é”®è¯ï¼š<code>login</code>,<code>getDnsListFromServer</code>,<code>fetchToken</code>,<code>token</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 16:39:6:481]: [EMClient] emchat manager login in process:19581</div><div class="line">[2017/3/1 16:39:6:539]: EMSessionManager::login(): lz1</div><div class="line">[2017/3/1 16:39:6:539]: getDnsListFromServer()</div><div class="line">...</div><div class="line">è¿™é‡Œä¼šåŒæ ·çš„å»è·å– DNS é…ç½®</div><div class="line">...</div><div class="line">[2017/3/1 10:1:41:794]: current host: domain: 182.92.0.214 port: 80</div><div class="line">[2017/3/1 10:1:41:794]: fetchTokenForUser()http://182.92.0.214:80/shztzn/smartfarm/token</div><div class="line">[2017/3/1 10:1:41:895]: [retrieve token time] 0: 0:101</div><div class="line">[2017/3/1 10:1:41:895]: fetchToken success </div><div class="line">[2017/3/1 10:1:41:895]: saveToken(): user: pad8a7195bffad4b6bdb65e533e969e43c2 time: 1488333701895</div><div class="line">[2017/3/1 10:1:41:921]: savetoken() result: 1</div><div class="line">[2017/3/1 10:1:41:921]: EMDNSManager::getCurrentHost: type: 1</div><div class="line">[2017/3/1 10:1:41:922]: EMSessionManager::checkDNS()</div><div class="line">[2017/3/1 10:1:41:922]: EMDNSManager::getHost: type: 1</div><div class="line">[2017/3/1 10:1:41:922]: current host: domain: 60.205.131.133 port: 6801</div><div class="line">[2017/3/1 10:1:41:922]: token is valid</div><div class="line">[2017/3/1 10:1:41:922]: setServer: 60.205.131.133</div><div class="line">[2017/3/1 10:1:41:922]: Calling connect...</div><div class="line">[2017/3/1 10:1:41:922]: doConnect()</div><div class="line">[2017/3/1 10:1:41:922]: current connectState: 0</div><div class="line">[2017/3/1 10:1:41:922]: log: level: 0, area: 1, ChatClient::connect() </div><div class="line">[2017/3/1 10:1:41:922]: log: level: 0, area: 2, getSocket(): 41</div><div class="line">[2017/3/1 10:1:41:922]: log: level: 1, area: 2, connectSocket(): start to connecting...</div><div class="line">[2017/3/1 10:1:41:958]: log: level: 1, area: 2, connectSocket(): connect finished</div><div class="line">...</div></pre></td></tr></table></figure></p>
<h3 id="è‡ªåŠ¨ç™»å½•"><a href="#è‡ªåŠ¨ç™»å½•" class="headerlink" title="è‡ªåŠ¨ç™»å½•"></a>è‡ªåŠ¨ç™»å½•</h3><p>åœ¨3.xä¸­ç¡®å®šè‡ªåŠ¨ç™»å½•åªéœ€è¦ä¸€ä¸ªå…³é”®è¯å°±å¥½ï¼š<code>autoLogin</code><br>éœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œè‡ªåŠ¨ç™»å½•å’Œé‡è¿ä¸ä¸€æ ·ï¼Œè‡ªåŠ¨ç™»å½•åŒ…å«åˆå§‹åŒ–ä»¥åŠ DNS çš„æ£€æµ‹ï¼Œé‡è¿ä¸€èˆ¬ä¸æ£€æµ‹ DNSï¼Œè‡ªåŠ¨ç™»å½•æœ€åè¾“å‡ºçš„æ—¥å¿—åŸºæœ¬å’Œé‡è¿çš„ä¸€æ ·ï¼Œéƒ½æ˜¯è¿›è¡Œç½‘ç»œé“¾æ¥ï¼›<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 17:30:17:640]: autoLogin</div><div class="line">[2017/3/1 17:30:17:641]: EMSessionManager::login(): lz1</div><div class="line">[2017/3/1 17:30:17:641]: EMDNSManager::getCurrentHost: type: 1</div><div class="line">[2017/3/1 17:30:17:641]: EMSessionManager::checkDNS()</div><div class="line">[2017/3/1 17:30:17:641]: valid_time: 1496085791000</div><div class="line">[2017/3/1 17:30:17:641]: EMSessionManager::parseDnsServer: autologin</div><div class="line">[2017/3/1 17:30:17:642]: current time: 1488360617642</div><div class="line">[2017/3/1 17:30:17:642]: valid time: 1496085791000</div><div class="line">[2017/3/1 17:30:17:642]: saveConfigs()</div><div class="line">[2017/3/1 17:30:17:643]: write to config file: &#123;</div><div class="line">    &quot;dns_time&quot;:&quot;1496085791000&quot;</div><div class="line">&#125;</div><div class="line">[2017/3/1 17:30:17:649]: checkDNS finished</div><div class="line">[2017/3/1 17:30:17:651]: Calling connect...</div><div class="line">[2017/3/1 17:30:17:651]: doConnect()</div><div class="line">[2017/3/1 17:30:17:651]: current connectState: 0</div><div class="line">[2017/3/1 17:30:17:651]: log: level: 0, area: 1, ChatClient::connect() </div><div class="line">[2017/3/1 17:30:17:653]: log: level: 0, area: 2, getSocket(): 35</div><div class="line">[2017/3/1 17:30:17:653]: log: level: 1, area: 2, connectSocket(): start to connecting...</div><div class="line">[2017/3/1 17:30:17:665]: log: level: 1, area: 2, connectSocket(): connect finished</div></pre></td></tr></table></figure></p>
<h3 id="é€€å‡ºç™»å½•"><a href="#é€€å‡ºç™»å½•" class="headerlink" title="é€€å‡ºç™»å½•"></a>é€€å‡ºç™»å½•</h3><p>æ¨å‡ºçš„ç™»å½•çš„æ—¥å¿—å¾ˆç®€å•ï¼Œæ¸…ç©ºä¸€äº›æ•°æ®ï¼Œç„¶åæ–­å¼€è¿æ¥ç­‰;</p>
<p>å…³é”®è¯ï¼š<code>logout</code>,<code>disconnect</code>,<code>cleanup</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 10:1:39:707]: begin logout ..</div><div class="line">[2017/3/1 10:1:39:707]: EMSessionManager::disconnect()</div><div class="line">[2017/3/1 10:1:39:707]: clearDnsConfig()</div><div class="line">[2017/3/1 10:1:39:707]: logout complete</div><div class="line">[2017/3/1 10:1:39:708]: saveConfigs()</div><div class="line">[2017/3/1 10:1:39:708]: write to config file: &#123;</div><div class="line">    &quot;dns_time&quot;:&quot;-1&quot;</div><div class="line">&#125;</div><div class="line">[2017/3/1 10:1:40:265]: stopReceive()</div><div class="line">[2017/3/1 10:1:40:265]: log: level: 0, area: 1, ChatClient::disconnect()</div><div class="line">[2017/3/1 10:1:40:265]: log: level: 1, area: 2, cleanup() 41</div><div class="line">[2017/3/1 10:1:40:265]: log: level: 1, area: 2, closeSocket() 41</div><div class="line">[2017/3/1 10:1:40:265]: log: level: 2, area: 1, handleDisconnect:14</div></pre></td></tr></table></figure></p>
<h3 id="å¿ƒè·³å®šæ—¶å™¨"><a href="#å¿ƒè·³å®šæ—¶å™¨" class="headerlink" title="å¿ƒè·³å®šæ—¶å™¨"></a>å¿ƒè·³å®šæ—¶å™¨</h3><p>ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ä¹‹åï¼Œå°±æ˜¯å®šä¹‰å¿ƒè·³å®šæ—¶å™¨ï¼Œç¬¬ä¸€æ¬¡è®¾ç½®æ—¶<code>2&#39;00&quot;</code>åå¯åŠ¨å¿ƒè·³å®šæ—¶å™¨ï¼Œåè¾¹ä¼šæ…¢æ…¢å¢åŠ åˆ°<code>4&#39;30&quot;</code>ï¼Œç„¶åä¼šæŒ‰ç…§<code>4&#39;30&quot;</code>è¿™æ ·å¾ªç¯ä¸‹å»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 16:39:7:52]: [smart ping] change smart ping state from : EMReady to : EMEvaluating</div><div class="line">[2017/3/1 16:39:7:52]: [smart ping] reset interval...</div><div class="line">[2017/3/1 16:39:7:52]: [smart ping] change smart ping state from : EMEvaluating to : EMEvaluating</div><div class="line">[2017/3/1 16:39:7:55]: [smart ping]  onConnectred ...</div><div class="line">[2017/3/1 16:39:7:55]: [smart ping] reset interval...</div><div class="line">[2017/3/1 16:39:7:66]: [smart ping] prevWifi:false isWifi:true prevWIFISSID: SSID&quot;huanxin-unifi&quot;</div><div class="line">[2017/3/1 16:39:7:67]: [smart ping] change smart ping state from : EMEvaluating to : EMEvaluating</div><div class="line">[2017/3/1 16:39:7:68]: [smart ping] reset currentInterval:02:00:000</div><div class="line">[2017/3/1 16:39:7:68]: [smart ping] schedule next alarm</div><div class="line">[2017/3/1 16:39:7:68]: [smart ping] current heartbeat interval : 02:00:000 smart ping state : EMEvaluating</div></pre></td></tr></table></figure></p>
<h3 id="é“¾æ¥ç›‘å¬ä¸é‡è¿"><a href="#é“¾æ¥ç›‘å¬ä¸é‡è¿" class="headerlink" title="é“¾æ¥ç›‘å¬ä¸é‡è¿"></a>é“¾æ¥ç›‘å¬ä¸é‡è¿</h3><p>è¿æ¥ç›‘å¬ä¸»è¦æ˜¯å®ç° EMConnectionListener æ¥å£æ¥ç›‘å¬è®¾å¤‡å’ŒæœåŠ¡å™¨çš„è¿æ¥æƒ…å†µï¼Œå…¶ä¸­ç‰µæ‰¯åˆ°ç½‘ç»œæ¢å¤åä¸æœåŠ¡å™¨çš„é‡è¿ï¼Œä¸‹è¾¹è¿™éƒ¨åˆ†æ—¥å¿—æ˜¯å½“æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥æ–­å¼€åï¼ŒSDKå’ŒæœåŠ¡å™¨çš„è¿æ¥æƒ…å†µï¼Œä¸‹è¾¹çš„æ—¥å¿—ä¸­å½“SDK æ£€æµ‹åˆ°é“¾æ¥ä¸åˆ°æœåŠ¡å™¨åä¼šé¦–å…ˆæ¸…ç©º socket ç­‰ä¸€äº›é“¾æ¥ç›¸å…³ä¿¡æ¯ï¼Œç„¶åä¼šå›åˆ°é“¾æ¥ç›‘å¬çš„<code>onDisConnect()</code>æ–¹æ³•ï¼Œæ¥ç€ SDK ä¼šè¿›è¡Œå°è¯•é‡è¿ 3 æ¬¡ï¼Œå½“å°è¯•å…¨éƒ¨å¤±è´¥åå°±ä¸åœ¨å°è¯•ï¼Œä¼šå®‰æ’ä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæ—¶å™¨çš„æ—¶é—´æ˜¯<code>2&#39;45&quot;</code>ï¼Œåˆ°æ—¶é—´åä¼šè§¦å‘å¿ƒè·³é‡æ–°è¿›è¡Œå°è¯•è¿æ¥æœåŠ¡å™¨ï¼Œå¦‚æœåœ¨è¿™ä¸ªå¿ƒè·³è§¦å‘ä¹‹å‰ï¼Œç½‘ç»œçŠ¶å†µæœ‰æ–°çš„å˜åŒ–ä¼šç›´æ¥é‡æ–°å°è¯•è¿æ¥æœåŠ¡å™¨ï¼›</p>
<p>å…³é”®è¯ï¼š<code>onDisconnect</code>,<code>disconnect</code>,<code>onNetworkChanged</code>,<code>EMHeartBeatReceiver</code>,<code>heartbeat</code>,<code>reconnect</code>,<code>doConnect</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 19:30:28:214]: log: level: 1, area: 2, cleanup() 34</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 1, area: 2, closeSocket() 34</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 2, area: 2, recv(): recv() failed. errno: 110: Connection timed out</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 1, area: 2, cleanup() -1</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 2, area: 1, handleDisconnect:1</div><div class="line">[2017/3/1 19:30:28:214]: EMSessionManager::onDisConnect(): 1</div><div class="line">[2017/3/1 19:30:28:214]: stopReceive()</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 0, area: 1, ChatClient::disconnect()</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 1, area: 2, cleanup() -1</div><div class="line">[2017/3/1 19:30:28:214]: log: level: 2, area: 1, handleDisconnect:14</div><div class="line">[2017/3/1 19:30:28:214]: network issue, just reconnect after random time</div><div class="line">[2017/3/1 19:30:28:215]: EMSessionManager::scheduleReconnect() updateServer: 0 updateToken: 0</div><div class="line">[2017/3/1 19:30:28:215]: EMSessionManager::delayReconnect()</div><div class="line">[2017/3/1 19:30:28:215]: getDelayedTime(): 7</div><div class="line">[2017/3/1 19:30:28:215]: notify state change to connection listener</div><div class="line">[2017/3/1 19:30:28:216]: [global listener] onDisconnect303</div><div class="line">[2017/3/1 19:30:28:216]: [smart ping]  onDisconnected ...303</div><div class="line">[2017/3/1 19:30:28:616]: [EMClient] connectivity receiver onReceiver</div><div class="line">[2017/3/1 19:30:28:629]: [EMClient] no data connection</div><div class="line">[2017/3/1 19:30:28:630]: onNetworkChanged(): 0</div><div class="line">[2017/3/1 19:30:28:630]: notify network broken</div><div class="line">[2017/3/1 19:30:28:630]: EMSessionManager::disconnect()</div><div class="line">[2017/3/1 19:30:28:632]: notify state change to connection listener</div><div class="line">[2017/3/1 19:30:28:632]: [global listener] onDisconnect2</div><div class="line">[2017/3/1 19:30:28:632]: [smart ping]  onDisconnected ...2</div><div class="line">[2017/3/1 19:30:31:440]: [EMClient] connectivity receiver onReceiver</div><div class="line">[2017/3/1 19:30:31:447]: [EMClient] no data connection</div><div class="line">[2017/3/1 19:30:31:447]: onNetworkChanged(): 0</div><div class="line">[2017/3/1 19:30:31:447]: notify network broken</div><div class="line">[2017/3/1 19:30:31:447]: EMSessionManager::disconnect()</div><div class="line">[2017/3/1 19:30:31:448]: notify state change to connection listener</div><div class="line">[2017/3/1 19:30:31:449]: [global listener] onDisconnect2</div><div class="line">[2017/3/1 19:30:31:449]: [smart ping]  onDisconnected ...2</div><div class="line">[2017/3/1 19:30:31:492]: [EMClient] connectivity receiver onReceiver</div><div class="line">[2017/3/1 19:30:31:511]: [EMClient] no data connection</div><div class="line">[2017/3/1 19:30:31:511]: onNetworkChanged(): 0</div><div class="line">[2017/3/1 19:30:31:511]: notify network broken</div><div class="line">[2017/3/1 19:30:31:512]: EMSessionManager::disconnect()</div><div class="line">[2017/3/1 19:30:31:512]: notify state change to connection listener</div><div class="line">[2017/3/1 19:30:31:512]: [global listener] onDisconnect2</div><div class="line">[2017/3/1 19:30:31:512]: [smart ping]  onDisconnected ...2</div><div class="line">[2017/3/1 19:33:4:560]: [EMHeartBeatReceiver] onReceive EMHeartBeatReceiver</div><div class="line">[2017/3/1 19:33:4:567]: [net] no data connection</div><div class="line">[2017/3/1 19:33:4:570]: [smart ping] schedule next alarm</div><div class="line">[2017/3/1 19:33:4:573]: [smart ping] current heartbeat interval : 02:45:000 smart ping state : EMEvaluating</div><div class="line">[2017/3/1 19:33:4:579]: [net] no data connection</div><div class="line">[2017/3/1 19:33:4:580]: [smart ping] is not connected to server, so use idle interval : 3 mins</div><div class="line">[2017/3/1 19:36:19:566]: [EMClient] connectivity receiver onReceiver</div><div class="line">[2017/3/1 19:36:19:577]: [net] wifi is connected</div><div class="line">[2017/3/1 19:36:19:577]: [EMClient] has wifi connection</div><div class="line">[2017/3/1 19:36:19:577]: onNetworkChanged(): 2</div><div class="line">[2017/3/1 19:36:19:577]: network comes back, retry to connect</div><div class="line">[2017/3/1 19:36:19:577]: EMSessionManager::reconnect()</div><div class="line">[2017/3/1 19:36:19:577]: doConnect()</div><div class="line">[2017/3/1 19:36:19:577]: current connectState: 0</div><div class="line">[2017/3/1 19:36:19:577]: log: level: 0, area: 1, ChatClient::connect() </div><div class="line">[2017/3/1 19:36:19:596]: log: level: 0, area: 2, getSocket(): 67</div><div class="line">[2017/3/1 19:36:19:596]: log: level: 1, area: 2, connectSocket(): start to connecting...</div><div class="line">[2017/3/1 19:36:19:602]: log: level: 1, area: 2, connectSocket(): connect finished</div></pre></td></tr></table></figure></p>
<h3 id="è¢«è¸¢-amp-å¼ºåˆ¶ä¸‹çº¿-amp-ç§»é™¤è´¦æˆ·"><a href="#è¢«è¸¢-amp-å¼ºåˆ¶ä¸‹çº¿-amp-ç§»é™¤è´¦æˆ·" class="headerlink" title="è¢«è¸¢&amp;å¼ºåˆ¶ä¸‹çº¿&amp;ç§»é™¤è´¦æˆ·"></a>è¢«è¸¢&amp;å¼ºåˆ¶ä¸‹çº¿&amp;ç§»é™¤è´¦æˆ·</h3><p>å’Œè´¦æˆ·ç›¸å…³çš„æ“ä½œå…¶å®ä¹Ÿéƒ½æ˜¯ä»¥æ¶ˆæ¯çš„å½¢å¼å’ŒæœåŠ¡å™¨è¿›è¡Œäº¤äº’çš„ï¼Œå…¶ä¸­ä¸€ä¸ªç‰¹æ®Šå±æ€§ä¸º<code>ns</code>ï¼Œç±»å‹æ˜¯<code>STATISTIC</code>ï¼Œç„¶åå…·ä½“çš„æ“ä½œé€šè¿‡ <code>operation</code>è¿›è¡Œç»†åˆ†ï¼š1.è¡¨ç¤ºç§»é™¤/ç¦ç”¨/å¼ºåˆ¶ä¸‹çº¿ï¼Œ2.è¡¨ç¤ºå¼‚åœ°ç™»å½•<br>è¿™å‡ ä¸ªçŠ¶æ€éƒ½ä¼šè§¦å‘ç½‘ç»œé“¾æ¥ç›‘å¬çš„æ–­å¼€<code>onDisconnect()</code>å›è°ƒï¼›</p>
<p>PSï¼šéœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼Œå½“æ”¶åˆ°è¿™å‡ ä¸ªçŠ¶æ€çš„å›è°ƒåéœ€è¦æ‰‹åŠ¨è°ƒç”¨<code>logout</code>ï¼Œæ¸…é™¤å½“å‰ç™»å½•çŠ¶æ€ï¼Œå› æ­¤åœ¨é‡åˆ°è¢«è¸¢å’Œå¼ºåˆ¶ä¸‹çº¿çš„æ—¥å¿—ä¸­ä¸€èˆ¬éƒ½èƒ½çœ‹åˆ°å’Œ logout ç›¸å…³æ—¥å¿—</p>
<p>å…³é”®è¯ï¼š<code>STATISTIC</code>,<code>operation</code>,<code>logout</code>,<code>onDisconnected</code>,<code>206</code>,<code>heart beat</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">å¼‚åœ°ç™»å½•</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; metas : [ &#123; id : 304104413746698288, from : @easemob.com, to : easemob-demo#chatdemoui_lz1@easemob.com/mobile, timestamp : 1488369626401, ns : STATISTIC, payload : &#123; operation : 2 &#125; &#125; ], queue : @easemob.com &#125; &#125;</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 0, area: 1, ChatClient::disconnect()</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 1, area: 2, cleanup() 35</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 1, area: 2, closeSocket() 35</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 2, area: 1, handleDisconnect:13</div><div class="line">[2017/3/1 20:0:26:592]: EMSessionManager::onDisConnect(): 13</div><div class="line">[2017/3/1 20:0:26:592]: stopReceive()</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 0, area: 1, ChatClient::disconnect()</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 1, area: 2, cleanup() -1</div><div class="line">[2017/3/1 20:0:26:592]: log: level: 2, area: 1, handleDisconnect:14</div><div class="line">[2017/3/1 20:0:26:593]: ConnUserLoginAnotherDevice</div><div class="line">[2017/3/1 20:0:26:593]: begin logout ..</div><div class="line">[2017/3/1 20:0:26:593]: EMSessionManager::disconnect()</div><div class="line">[2017/3/1 20:0:26:593]: clearDnsConfig()</div><div class="line">[2017/3/1 20:0:26:593]: logout complete</div><div class="line">[2017/3/1 20:0:26:593]: notify state change to connection listener</div><div class="line">[2017/3/1 20:0:26:618]: [smart ping]  onDisconnected ...206</div><div class="line">[2017/3/1 20:0:26:640]: [EMPushHelper] push notification helper ondestory</div><div class="line">[2017/3/1 20:0:26:641]: [EMClient]  SDK Logout</div><div class="line">[2017/3/1 20:0:26:643]: [smart ping] stop heart beat timer</div><div class="line">[2017/3/1 20:0:26:643]: [smart ping] change smart ping state from : EMEvaluating to : EMStopped</div><div class="line">[2017/3/1 20:0:26:644]: [smart ping] reset interval...</div><div class="line">[2017/3/1 20:0:26:645]: [smart ping] change smart ping state from : EMStopped to : EMEvaluating</div><div class="line">[2017/3/1 20:0:26:650]: logout, user not login</div><div class="line">[2017/3/1 20:0:26:650]: saveConfigs()</div><div class="line">[2017/3/1 20:0:26:651]: write to config file: &#123;</div><div class="line">    &quot;dns_time&quot;:&quot;-1&quot;</div><div class="line">&#125;</div><div class="line"></div><div class="line">ç§»é™¤/ç¦ç”¨/å¼ºåˆ¶ä¸‹çº¿</div><div class="line">[2017/3/2 14:14:55:351]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; metas : [ &#123; id : 304386456690886672, from : @easemob.com, to : easemob-demo#chatdemoui_lz1@easemob.com/mobile, timestamp : 1488435294646, ns : STATISTIC, payload : &#123; operation : 1 &#125; &#125; ], queue : @easemob.com &#125; &#125;</div></pre></td></tr></table></figure></p>
<h3 id="ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿—-TODO"><a href="#ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿—-TODO" class="headerlink" title="ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿— TODO"></a>ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿— TODO</h3><p>ä¸‹è¾¹è¿™æ®µæ—¥å¿—æ˜¯åœ¨å½“å‰ç½‘ç»œæœ‰é—®é¢˜çš„æƒ…å†µä¸‹è¿›è¡Œç™»å½•è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ç»“æœæ˜¯<code>408</code>ï¼Œæ­£å¸¸æƒ…å†µé‡è¿æœåŠ¡å™¨æ˜¯ä¸éœ€è¦è·å–DNS çš„ï¼Œä½†æ˜¯è¿™ä¸ªåº”è¯¥æ˜¯ DNS é…ç½®å·²ç»å¤±æ•ˆï¼Œè¿™è¾¹ä¸€ç›´åœ¨å°è¯•é‡æ–°è·å– DNSï¼›ä¸è¿‡ä»åè¾¹çš„æ—¥å¿—å¯ä»¥çœ‹å‡ºæ˜¯ç½‘ç»œè¿æ¥æœ‰é—®é¢˜ï¼›</p>
<p>å…³é”®è¯ï¼š<code>disconnect</code>,<code>handleDisconnect</code>,<code>checkDNS</code>,<code>408</code>,<code>reconnect</code>,<code>unreachable</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 9:59:52:649]: log: level: 0, area: 1, ChatClient::disconnect()</div><div class="line">[2017/3/1 9:59:52:649]: log: level: 1, area: 2, cleanup() -4</div><div class="line">[2017/3/1 9:59:52:649]: log: level: 2, area: 1, handleDisconnect:14</div><div class="line">[2017/3/1 9:59:52:649]: dns error, reconnect using different IP</div><div class="line">[2017/3/1 9:59:52:649]: EMSessionManager::scheduleReconnect() updateServer: 1 updateToken: 0</div><div class="line">[2017/3/1 9:59:52:649]: EMDNSManager::getNextAvailableHost: type: 1</div><div class="line">[2017/3/1 9:59:52:649]: EMSessionManager::checkDNS()</div><div class="line">[2017/3/1 9:59:52:649]: tried all candidates, download again</div><div class="line">[2017/3/1 9:59:52:649]: getDnsListFromServer()</div><div class="line">[2017/3/1 9:59:52:649]: EMDNSManager::getHost: type: 0</div><div class="line">[2017/3/1 9:59:52:649]: current host: domain: 120.26.17.225 port: 80</div><div class="line">[2017/3/1 9:59:52:649]: buildUrl(): http://120.26.17.225/easemob/server.json?sdk_version=3.2.3&amp;app_key=shztzn%23smartfarm&amp;file_version=61</div><div class="line">[2017/3/1 9:59:52:651]: notify state change to connection listener</div><div class="line">[2017/3/1 9:59:52:664]: 1 time retry</div><div class="line">[2017/3/1 9:59:52:664]: getDnsListFromServer code: 408 response: </div><div class="line">[2017/3/1 9:59:52:664]: EMDNSManager::getHost: type: 0</div><div class="line">[2017/3/1 9:59:52:665]: current host: domain: 59.110.89.59 port: 80</div><div class="line">[2017/3/1 9:59:52:665]: buildUrl(): http://59.110.89.59/easemob/server.json?sdk_version=3.2.3&amp;app_key=shztzn%23smartfarm&amp;file_version=61</div><div class="line">[2017/3/1 9:59:52:673]: 2 time retry</div><div class="line">[2017/3/1 9:59:52:673]: getDnsListFromServer code: 408 response: </div><div class="line">[2017/3/1 9:59:52:674]: EMDNSManager::getHost: type: 0</div><div class="line">[2017/3/1 9:59:52:674]: current host: domain: 112.126.66.111 port: 80</div><div class="line">[2017/3/1 9:59:52:674]: buildUrl(): http://112.126.66.111/easemob/server.json?sdk_version=3.2.3&amp;app_key=shztzn%23smartfarm&amp;file_version=61</div><div class="line">[2017/3/1 9:59:52:674]: EMDNSManager::getNextAvailableHost: new index: 0</div><div class="line">[2017/3/1 9:59:52:675]: EMDNSManager::getHost: type: 1</div><div class="line">[2017/3/1 9:59:52:675]: current host: domain: 60.205.131.133 port: 6801</div><div class="line">[2017/3/1 9:59:52:675]: setServer: 60.205.131.133</div><div class="line">[2017/3/1 9:59:52:676]: EMSessionManager::delayReconnect()</div><div class="line">[2017/3/1 9:59:52:676]: getDelayedTime(): 17</div><div class="line">[2017/3/1 9:59:52:676]: Calling connect result: 0</div><div class="line">[2017/3/1 9:59:53:505]: asyncSendMessage: 14883335935043542 retry = 3</div><div class="line">[2017/3/1 9:59:53:505]: EMSessionManager::reconnect()</div><div class="line">[2017/3/1 9:59:53:506]: doConnect()</div><div class="line">[2017/3/1 9:59:53:506]: current connectState: 0</div><div class="line">[2017/3/1 9:59:53:506]: log: level: 0, area: 1, ChatClient::connect() </div><div class="line">[2017/3/1 9:59:53:506]: log: level: 0, area: 2, getSocket(): 41</div><div class="line">[2017/3/1 9:59:53:506]: log: level: 1, area: 2, connectSocket(): start to connecting...</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 2, area: 2, connectSocket(): 60.205.131.133 error: Network is unreachable</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 1, area: 2, closeSocket() 41</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 1, area: 2, connectSocket(): connect finished</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 2, area: 2, connect(): connection refused</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 1, area: 2, cleanup() -4</div><div class="line">[2017/3/1 9:59:53:508]: log: level: 2, area: 1, handleDisconnect:4</div><div class="line">[2017/3/1 9:59:53:508]: EMSessionManager::onDisConnect(): 4</div><div class="line">[2017/3/1 9:59:53:508]: stopReceive()</div></pre></td></tr></table></figure></p>
<h3 id="æ¨é€ç›¸å…³"><a href="#æ¨é€ç›¸å…³" class="headerlink" title="æ¨é€ç›¸å…³"></a>æ¨é€ç›¸å…³</h3><p>å’Œæ¨é€ç›¸å…³çš„æ—¥å¿—éƒ½æ˜¯å’Œ<code>EMPushHelper</code>æˆ–è€…<code>EMPushManager</code>ç›¸å…³çš„ï¼Œå¯ä»¥ä»æ—¥å¿—ä¸­çœ‹åˆ°æ¨é€åŠŸèƒ½æ˜¯å¦æ¿€æ´»ï¼Œç„¶åè·å–<code>devicetoken</code>å‘é€åˆ°æœåŠ¡å™¨ç­‰ï¼Œ<code>devicetoken</code>è¿™ä¸ªå€¼ä¸€å®šè¦å­˜åœ¨ï¼Œå¦è€…æ¨é€æ— æ•ˆï¼›è¿™äº›å¯ä»¥ä½œä¸ºæ£€æµ‹é›†æˆç¦»çº¿æ¨é€æœ¬åœ°è®¾ç½®æ˜¯å¦æœ‰æ•ˆçš„ä¸€äº›æ‰‹æ®µï¼›</p>
<p>å…³é”®è¯ï¼š<code>GCM</code>,<code>push</code>,<code>devicetoken</code>,<code>sendDeviceToServer</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 16:39:7:202]: isEnabledGCM: 1</div><div class="line">[2017/3/1 16:39:7:202]: [EMPushHelper] GCM is enabled : true</div><div class="line">[2017/3/1 16:39:7:207]: [EMPushHelper] GCM service available : false</div><div class="line">[2017/3/1 16:39:7:217]: [EMPushHelper] mipush available : true</div><div class="line">[2017/3/1 16:39:7:218]: [EMPushHelper] third-party push available</div><div class="line">[2017/3/1 16:39:7:221]: [EMPushManager] nick name is null or empty</div><div class="line">[2017/3/1 16:39:7:708]: [EMMipushReceiver] mi push reigster success</div><div class="line">[2017/3/1 16:39:7:708]: [EMPushHelper] devicetoken = /cRO2vRH64mWOH46+We1zxt4+onQRJOe26fvcX02iC0=</div><div class="line">[2017/3/1 16:39:7:715]: [HttpClientManager] try send request, request url: http://182.92.4.52:80/easemob-demo/chatdemoui/devices with number: 0</div><div class="line">[2017/3/1 16:39:7:792]: [EMPushHelper] sendDeviceToServer SC_OK:</div><div class="line"></div><div class="line">ä¿®æ”¹ç¦»çº¿æ¨é€ç›¸å…³</div><div class="line">[2017/3/2 13:11:53:423]: SetGroupsOfNotificationDisabled 1</div><div class="line">[2017/3/2 13:11:53:564]: update user configs:   &#123;</div><div class="line">  &quot;action&quot; : &quot;put&quot;,</div><div class="line">  &quot;application&quot; : &quot;4d7e4ba0-dc4a-11e3-90d5-e1ffbaacdaf5&quot;,</div><div class="line">  &quot;path&quot; : &quot;/users&quot;,</div><div class="line">  &quot;uri&quot; : &quot;https://a1.easemob.com/easemob-demo/chatdemoui/users&quot;,</div><div class="line">  &quot;entities&quot; : [ &#123;</div><div class="line">    &quot;uuid&quot; : &quot;479d9cea-134d-11e6-8943-534ab75c4508&quot;,</div><div class="line">    &quot;type&quot; : &quot;user&quot;,</div><div class="line">    &quot;created&quot; : 1462513331630,</div><div class="line">    &quot;modified&quot; : 1488431513381,</div><div class="line">    &quot;username&quot; : &quot;lz1&quot;,</div><div class="line">    &quot;activated&quot; : true,</div><div class="line">    &quot;notification_display_style&quot; : 1,</div><div class="line">    &quot;device_token&quot; : &quot;/cRO2vRH64mWOH46+We1zxt4+onQRJOe26fvcX02iC0=&quot;,</div><div class="line">    &quot;nickname&quot; : &quot;ç«‹æ­£1&quot;,</div><div class="line">    &quot;notification_ignore_1479267663683&quot; : true,</div><div class="line">    &quot;notification_ignore_1483610597352&quot; : true,</div><div class="line">    &quot;notification_ignore_1488431342804&quot; : false,</div><div class="line">    &quot;notifier_name&quot; : &quot;2882303761517426801&quot;</div><div class="line">  &#125; ],</div><div class="line">  &quot;timestamp&quot; : 1488431513377,</div><div class="line">  &quot;duration&quot; : 33,</div><div class="line">  &quot;organization&quot; : &quot;easemob-demo&quot;,</div><div class="line">  &quot;applicationName&quot; : &quot;chatdemoui&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="æ¶ˆæ¯ç›¸å…³"><a href="#æ¶ˆæ¯ç›¸å…³" class="headerlink" title="æ¶ˆæ¯ç›¸å…³"></a>æ¶ˆæ¯ç›¸å…³</h2><p>æ¶ˆæ¯ç›¸å…³çš„æ—¥å¿—è¿˜æ˜¯æ¯”è¾ƒæ˜ç¡®çš„ï¼Œ</p>
<h3 id="å‘é€æ¶ˆæ¯"><a href="#å‘é€æ¶ˆæ¯" class="headerlink" title="å‘é€æ¶ˆæ¯"></a>å‘é€æ¶ˆæ¯</h3><p>å‘é€æ–°æ¶ˆæ¯æ—¶ä¼šé¦–å…ˆç”Ÿæˆä¸€ä¸ªä¸´æ—¶çš„ msgIdï¼Œè¿™ä¸ª msgId æ˜¯å½“å‰æ—¶é—´æˆ³+å››ä½æ‹¼æˆï¼›å½“æ¶ˆæ¯å‘é€æˆåŠŸåï¼ŒæœåŠ¡å™¨ä¼šè¿”å›å¯¹åº”çš„æœåŠ¡å™¨ç”Ÿæˆçš„ msgId ç„¶åæ›´æ–°åˆ°æœ¬åœ°ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªæ¶ˆæ¯çš„å‘é€å®Œæˆï¼ˆå¯ä»¥æ ¹æ®è¿™éƒ¨åˆ†æ¥åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦å‘é€æˆåŠŸï¼‰ï¼›<br>ç„¶åå¦‚æœå¼€å¯äº†å·²è¯»å›æ‰§ï¼Œå½“å¯¹æ–¹è¯»äº†æ¶ˆæ¯ä¹‹åï¼Œå‘é€è€…ä¼šæ”¶åˆ°ä¸€æ¡é€šçŸ¥ï¼ˆNOYICE çš„æ¶ˆæ¯ï¼‰å‘Šè¯‰ä½ æœ‰å› æ¶ˆæ¯ï¼Œå› ä¸º ack ä¹Ÿæ˜¯æ–°æ¶ˆæ¯ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯éœ€è¦è‡ªå·±å»æœåŠ¡å™¨åŒæ­¥æ‹‰å–ï¼ˆæ³¨æ„æ—¥å¿—ä¸­çš„ REAF_ACKï¼‰ï¼›å½“åšå®Œè¿™äº›ä¹‹åï¼ŒSDK ä¼šé‡æ–°å‘ä¸€æ¡åŒæ­¥çš„æ¶ˆæ¯ï¼Œæ¥çœ‹ä¸‹æ˜¯å¦è¿˜æœ‰æ–°çš„æ¶ˆæ¯</p>
<p>å…³é”®è¯ï¼š<code>asyncSendMessage</code>,<code>SEND</code>,<code>RECV</code>,<code>NOTICE</code>,<code>server_id</code>,<code>READ_ACK</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">[2017/3/1 21:7:0:649]: asyncSendMessage: 14883736206090002 retry = 3</div><div class="line">[2017/3/1 21:7:0:650]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 14883736206090002, to : lz2, ns : CHAT, payload : &#123; chattype : CHAT, from : lz1, to : lz2, contents : [ &#123; contenttype : TEXT, text : wwwé—®é—® &#125; ] &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">æ¶ˆæ¯å‘é€æˆåŠŸï¼Œè¿”å›æœåŠ¡å™¨ç”Ÿæˆçš„ msgId</div><div class="line">[2017/3/1 21:7:0:743]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, meta_id : 14883736206090002, server_id : 304121568710101040, timestamp : 1488373620639 &#125; &#125;</div><div class="line"></div><div class="line">æœåŠ¡å™¨å‘Šè¯‰ SDK æœ‰æ–°æ¶ˆæ¯äº†</div><div class="line">[2017/3/1 21:7:1:314]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : NOTICE, payload : &#123; queue : lz2/mobile &#125; &#125;</div><div class="line"></div><div class="line">å‘é€è¯·æ±‚æ¥åŒæ­¥æ–°æ¶ˆæ¯</div><div class="line">[2017/3/1 21:7:1:314]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; queue : lz2/mobile &#125; &#125;</div><div class="line"></div><div class="line">æ”¶åˆ°å·²è¯»çš„ ACK</div><div class="line">[2017/3/1 21:7:1:333]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304121571285403696, timestamp : 1488373621196, ns : CHAT, payload : &#123; chattype : READ_ACK, from : lz2, to : lz1, ack_message_id : 304121568710101040 &#125; &#125; ], next_key : 304121571285403696, queue : lz2, timestamp : 1488373621267 &#125; &#125;</div><div class="line"></div><div class="line">æŸ¥è¯¢æ˜¯å¦è¿˜æœ‰æ–°æ¶ˆæ¯</div><div class="line">[2017/3/1 21:7:1:333]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; key : 304121571285403696, queue : lz2 &#125; &#125;</div><div class="line">[2017/3/1 21:7:1:515]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, queue : lz2, is_last : true, timestamp : 1488373621351 &#125; &#125;</div><div class="line"></div><div class="line">...</div><div class="line">å‘é€å·²è¯» ACK</div><div class="line">[2017/3/2 11:7:8:116]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 775, to : admin, ns : CHAT, payload : &#123; chattype : READ_ACK, from : lz1, to : admin, ack_message_id : 304337511725925492 &#125; &#125; &#125; &#125;</div></pre></td></tr></table></figure></p>
<h3 id="æ”¶åˆ°æ–°æ¶ˆæ¯"><a href="#æ”¶åˆ°æ–°æ¶ˆæ¯" class="headerlink" title="æ”¶åˆ°æ–°æ¶ˆæ¯"></a>æ”¶åˆ°æ–°æ¶ˆæ¯</h3><p>3.xæ”¶åˆ°æ–°æ¶ˆæ¯åæœåŠ¡å™¨å¹¶ä¸ä¼šç›´æ¥ä¸‹å‘æ¶ˆæ¯ï¼Œè€Œæ˜¯ç»™SDKç«¯ä¸‹å‘ä¸€ä¸ªé€šçŸ¥ï¼ˆNOTICE çš„æ¶ˆæ¯ï¼‰ï¼Œå‘Šè¯‰ä½ æœ‰æ–°æ¶ˆæ¯ï¼Œå°±åƒä¸‹è¾¹æ—¥å¿—çš„ç¬¬ä¸€è¡Œï¼Œsdk æ”¶åˆ°è¿™æ¡æ¶ˆæ¯ä¹‹åï¼Œä¼šç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªæˆ‘è¦è·å–æ–°æ¶ˆæ¯çš„æ¶ˆæ¯ï¼ˆæœ‰ç‚¹ç»•ï¼‰ï¼Œç„¶åæœåŠ¡å™¨æ‰ä¼šæŠŠè¿™æ¡æ¶ˆæ¯ç»™ä¸‹å‘ï¼Œå½“æ¥æ”¶å®Œè¿™æ¬¡é€šçŸ¥çš„æ¶ˆæ¯åï¼ŒSDK è¿˜ä¼šç»™æœåŠ¡å™¨åœ¨å‘é€ä¸€æ¡åŒæ­¥æ¶ˆæ¯ï¼Œç”¨æ¥è¯¢é—®æœåŠ¡å™¨æ˜¯å¦è¿˜æœ‰æ–°çš„æ¶ˆæ¯ï¼Œå½“è¿”å›ç»“æœåŒ…å«<code>is_last:true</code>æ—¶ï¼Œè¡¨ç¤ºå·²ç»æ²¡æœ‰æ–°æ¶ˆæ¯ï¼›<br>å½“æ¶ˆæ¯æ¥æ”¶å®Œæˆä¹‹åå°±æ˜¯SDKå†…éƒ¨ç»™ä¸Šå±‚å‘é€é€šçŸ¥äº†ï¼›æœ€åå°±æ˜¯å½“è‡ªå·±çœ‹äº†æ–°æ¶ˆæ¯ä¹‹åï¼Œè¿˜è¦ç»™å¯¹æ–¹å‘é€ä¸€æ¡ACK çš„ä¿¡æ¯ï¼Œç„¶åè¿˜è¦æ”¶åˆ°ä¸€æ¡æœåŠ¡å™¨è¿”å›çš„ä¸€æ¡çŠ¶æ€ä¿¡æ¯æ‰ç®—å®Œäº‹ï¼›</p>
<p>å…³é”®è¯ï¼š<code>RECV</code>,<code>NOTICE</code>,<code>CHAT</code>,<code>compress_algorimth</code>,<code>callbackReceievedMessages</code>,<code>onMessageReceived</code>,<code>COMMAND</code>,<code>action</code>,<code>READ_ACK</code>,<code>is_last</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line">æœåŠ¡å™¨å‘Šè¯‰ SDK æœ‰æ–°æ¶ˆæ¯äº†</div><div class="line">[2017/3/1 20:58:54:6]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : NOTICE, payload : &#123; queue : lz2/mobile &#125; &#125;</div><div class="line"></div><div class="line">å‘é€è¯·æ±‚æ¥åŒæ­¥æ–°æ¶ˆæ¯</div><div class="line">[2017/3/1 20:58:54:6]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; queue : lz2/mobile &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/1 20:58:54:32]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304119478168324144, timestamp : 1488373133870, ns : CHAT, payload : &#123; chattype : CHAT, from : lz2, to : lz1, contents : [ &#123; contenttype : TEXT, text : qqqqqqqqqqqq &#125; ] &#125; &#125; ], next_key : 304119478168324144, queue : lz2, timestamp : 1488373133959 &#125; &#125;</div><div class="line"></div><div class="line">æŸ¥è¯¢æ˜¯å¦è¿˜æœ‰æ–°æ¶ˆæ¯</div><div class="line">[2017/3/1 20:58:54:32]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; key : 304119478168324144, queue : lz2 &#125; &#125;</div><div class="line">[2017/3/1 20:58:54:106]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, queue : lz2, is_last : true, timestamp : 1488373134006 &#125; &#125;</div><div class="line"></div><div class="line">å‘é€ ACK ç»™å¯¹æ–¹</div><div class="line">[2017/3/1 21:5:55:298]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 259, to : lz2, ns : CHAT, payload : &#123; chattype : READ_ACK, from : lz1, to : lz2, ack_message_id : 304119478168324144 &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/1 21:5:55:364]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, meta_id : 259, server_id : 304121288056637488, timestamp : 1488373555277 &#125; &#125;</div><div class="line"></div><div class="line">æ”¶åˆ° cmd æ¶ˆæ¯</div><div class="line">[2017/3/2 11:6:13:653]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304337832351106168, timestamp : 1488423973404, ns : CHAT, payload : &#123; chattype : CHAT, from : admin, to : lz1, contents : [ &#123; contenttype : COMMAND, action : action1 &#125; ] &#125; &#125; ], next_key : 304337832351106168, queue : admin, timestamp : 1488423973440 &#125; &#125;</div><div class="line"></div><div class="line">æ”¶åˆ°ç¦»çº¿æ¶ˆæ¯ï¼Œè¿™ä¸ªç›´æ¥æ˜¯ä¸€ä¸ª json æ•°ç»„</div><div class="line">[2017/3/2 12:46:37:98]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304343301819992124, timestamp : 1488425246875, ns : CHAT, payload : &#123; chattype : CHATROOM, from : qazqaz123321, to : 3759501541378, contents : [ &#123; contenttype : VOICE, displayname : qazqaz12332120170302T112724.amr, remotepath : https://a1.easemob.com/easemob-demo/chatdemoui/chatfiles/289e8240-fef8-11e6-b120-0b193a44693b, secretkey : KJ6CSv74EeacsQ3KDqwnqF9amIMbc6fNBK-qXRVNwd4MkZR7, filelength : 2134, duration : 2 &#125; ] &#125; &#125;, &#123; id : 304343752070137864, timestamp : 1488425351703, ns : CHAT, payload : &#123; chattype : CHATROOM, from : lingo, to : 3759501541378, contents : [ &#123; contenttype : VOICE, displayname : lingo20170302T112907.amr, remotepath : https://a1.easemob.com/easemob-demo/chatdemoui/chatfiles/671458b0-fef8-11e6-bf54-a356d485d240, secretkey : ZxRYuv74EeankPOIMACFAftORz04rIiMWfHPQUKLvcXi_Jgo, filelength : 2566, duration : 3 &#125; ] &#125; &#125;, &#123; id : 304345086324377616, timestamp : 1488425662350, ns : CHAT, payload : &#123; chattype : CHATROOM, from : 15515625700, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : [):] &#125; ], exts : [ &#123; key : userIcon, type : 7, value : https://116.255.227.78:1008/FileUpload/UserImage/7521a766-64db-4a18-8772-d22c5e065d0b.jpg &#125;, &#123; key : userName, type : 7, value : hl_4a8fe2f &#125; ] &#125; &#125;, &#123; id : 304347342838958040, timestamp : 1488426187748, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : [+o(] &#125; ] &#125; &#125;, &#123; id : 304347456840140856, timestamp : 1488426214277, ns : CHAT, payload : &#123; chattype : CHATROOM, from : 15172330957, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : åŸºæœ¬ &#125; ] &#125; &#125;, &#123; id : 304348603307001816, timestamp : 1488426481208, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : [:(] &#125; ] &#125; &#125;, &#123; id : 304349346936129496, timestamp : 1488426654367, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : [:(][(a)] &#125; ] &#125; &#125;, &#123; id : 304349681360570328, timestamp : 1488426732212, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : A &#125; ] &#125; &#125;, &#123; id : 304350070763947992, timestamp : 1488426822893, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : A &#125; ] &#125; &#125;, &#123; id : 304350107678017496, timestamp : 1488426831478, ns : CHAT, payload : &#123; chattype : CHATROOM, from : kimpeng, to : 3759501541378, contents : [ &#123; contenttype : TEXT, text : A &#125; ] &#125; &#125;, &#123; id : 304363701610219560, timestamp : 1488429996565, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_3759501541378@conference.easemob.com, operation : JOIN, from : easemob-demo#chatdemoui_lz1@easemob.com, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304363701610219560, queue : 3759501541378@conference.easemob.com, timestamp : 1488429996918 &#125; &#125;</div><div class="line">``` </div><div class="line"></div><div class="line">ä¸šåŠ¡é€»è¾‘ç›¸å…³</div><div class="line">---------</div><div class="line">åœ¨3.x ä¸­ä¸€åˆ‡çš„æ“ä½œéƒ½æ˜¯ç”¨æ¶ˆæ¯çš„å½¢å¼æ¥åšçš„ï¼Œé€šè¿‡å‘é€ä»£è¡¨ç‰¹å®šæ“ä½œçš„æ¶ˆæ¯ç»™æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨ä¼šè¿”å›è¿™ä¸ªæ¶ˆæ¯å‘é€æˆåŠŸï¼Œæ¥ç€æœåŠ¡å™¨ä¼šä»¥æ–°æ¶ˆæ¯çš„å½¢å¼å‘Šè¯‰ SDK æ“ä½œæˆåŠŸï¼Œæœ€åéƒ½å’Œæ”¶å‘æ¶ˆæ¯çš„æ—¥å¿—é€»è¾‘ä¸€æ ·ï¼›</div><div class="line">éœ€è¦æ³¨æ„çš„å°±æ˜¯è¿™äº›æ“ä½œä¸­çš„å…³é”®è¯ï¼›</div><div class="line">é¦–å…ˆè¯´ä¸€ç‚¹å°±æ˜¯ï¼Œè¿™äº›æ“ä½œéƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ `ns`è¿™ä¸ªå±æ€§çš„æŒ‡è¡¨ç¤ºä¸åŒçš„æ“ä½œ:`MUC`è¡¨ç¤ºç¾¤ç»„å’ŒèŠå¤©å®¤ç›¸å…³æ“ä½œï¼›`ROSTER`è¡¨ç¤ºè”ç³»äººç›¸å…³æ“ä½œ</div><div class="line"></div><div class="line">ä¸‹è¾¹å…ˆç”¨åˆ›å»ºæ–°ç¾¤ç»„æ¥è¯¦ç»†è§£é‡Šä¸‹ï¼š</div><div class="line"></div><div class="line">### åˆ›å»ºæ–°ç¾¤ç»„</div><div class="line">ä»åˆ›å»ºç¾¤ç»„å¯ä»¥çœ‹å‡ºï¼Œåˆ›å»ºçš„æ“ä½œå°±æ˜¯ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªåˆ›å»ºçš„æ“ä½œï¼Œæ¥ç€æœåŠ¡å™¨è¿”å›è¿™æ¡æ¶ˆæ¯å‘é€æˆåŠŸï¼Œç„¶åå°±åƒæ”¶åˆ°æ¶ˆæ¯ä¸€æ ·ï¼ŒæœåŠ¡å™¨å‘Šè¯‰åˆ›å»ºè€…ï¼Œä½ æœ‰æ–°æ¶ˆæ¯éœ€è¦æ‹‰å–ï¼Œæ‹‰å–åˆ°åå¯ä»¥å‘ç°ï¼Œè¿™æ¡æ¶ˆæ¯å°±æ˜¯å‘Šè¯‰è‡ªå·±ç¾¤ç»„åˆ›å»ºæˆåŠŸï¼Œç„¶ååè¾¹å°±æ˜¯æ£€æŸ¥æ˜¯å¦æœ‰æ–°æ¶ˆæ¯;</div><div class="line"></div><div class="line">å…³é”®è¯ï¼š`MUC`,`SEND`,`CREATE`,`RECV`,</div><div class="line">```log</div><div class="line">[2017/3/2 12:7:35:249]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 2567, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248, operation : CREATE, from : lz1, setting : &#123; name : ttttt, desc : tttttt, muc_type : 2, max_users : 200, owner : lz1 &#125;, reason : lz1é‚€è¯·åŠ å…¥ç¾¤ï¼šttttt &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:316]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, meta_id : 2567, server_id : 304353645141428264, timestamp : 1488427655125 &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:317]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : NOTICE, payload : &#123; queue : 1488427655248@conference.easemob.com &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:317]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; queue : 1488427655248@conference.easemob.com &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:372]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304353645279840296, timestamp : 1488427655132, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248@conference.easemob.com, operation : CREATE, from : easemob-demo#chatdemoui_lz1@easemob.com, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304353645279840296, queue : 1488427655248@conference.easemob.com, timestamp : 1488427655190 &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:373]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; key : 304353645279840296, queue : 1488427655248@conference.easemob.com &#125; &#125;</div><div class="line"></div><div class="line">[2017/3/2 12:7:35:453]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, queue : 1488427655248@conference.easemob.com, is_last : true, timestamp : 1488427655254 &#125; &#125;</div></pre></td></tr></table></figure></p>
<h3 id="ç¾¤ç»„å…¶ä»–æ“ä½œ"><a href="#ç¾¤ç»„å…¶ä»–æ“ä½œ" class="headerlink" title="ç¾¤ç»„å…¶ä»–æ“ä½œ"></a>ç¾¤ç»„å…¶ä»–æ“ä½œ</h3><p>å…³é”®è¯ï¼š<code>MUC</code>,<code>operation</code>,<code>SEND</code>,<code>APPLY</code>,<code>INVITE</code>,<code>INVITE_ACCEPT</code>,<code>INVITE_DECLINE</code>,<code>APPLY_ACCEPT</code>,<code>APPLY_DECLINE``PRESENCE</code>,<code>LEAVE</code>,<code>DESTROY</code>,<code>KICK</code>,<code>ABSENCE</code>,<code>RECV</code>,<code>BLOCK</code>,<code>UNBLOCK</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">å‘é€åŠ å…¥è¯·æ±‚ï¼š</div><div class="line">[2017/3/2 12:26:38:737]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 3591, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488428778313, operation : APPLY, from : lz1, tos : [ lz2 ], reason : è¯·æ±‚åŠ å…¥ &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">æ”¶åˆ°åŠ å…¥è¯·æ±‚ï¼š</div><div class="line">[2017/3/2 12:16:48:410]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304356020619053112, timestamp : 1488428208185, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248@conference.easemob.com, operation : APPLY, from : easemob-demo#chatdemoui_lz2@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], reason : è¯·æ±‚åŠ å…¥, is_chatroom : false, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304356020619053112, queue : lz2, timestamp : 1488428208229 &#125; &#125;</div><div class="line"></div><div class="line">é‚€è¯·åŠ å…¥ç¾¤ç»„</div><div class="line">[2017/3/2 11:39:39:774]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 2055, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1483610597352, operation : INVITE, from : lz1, tos : [ lz2 ], reason : welcome &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 11:39:41:64]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304346454208546772, timestamp : 1488425980847, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1483610597352@conference.easemob.com, operation : INVITE_ACCEPT, from : easemob-demo#chatdemoui_lz2@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], is_chatroom : false, status : &#123; description :  &#125; &#125; &#125; ], next_key : 304346454208546772, queue : 1483610597352@conference.easemob.com, timestamp : 1488425980883 &#125; &#125;</div><div class="line">[2017/3/2 11:39:41:138]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304346454330181588, timestamp : 1488425980876, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1483610597352@conference.easemob.com, operation : PRESENCE, from : easemob-demo#chatdemoui_lz2@easemob.com, is_chatroom : false &#125; &#125; ], next_key : 304346454330181588, queue : 1483610597352@conference.easemob.com, timestamp : 1488425980928 &#125; &#125;</div><div class="line"></div><div class="line">åŒæ„å¯¹æ–¹é‚€è¯·</div><div class="line">[2017/3/2 12:20:41:289]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 2823, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248, operation : APPLY_ACCEPT, from : lz1, tos : [ lz2 ] &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 12:20:42:696]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304357026689980384, timestamp : 1488428442436, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248@conference.easemob.com, operation : PRESENCE, from : easemob-demo#chatdemoui_lz2@easemob.com, is_chatroom : false &#125; &#125; ], next_key : 304357026689980384, queue : 1488427655248@conference.easemob.com, timestamp : 1488428442505 &#125; &#125;</div><div class="line"></div><div class="line">æ‹’ç»å¯¹æ–¹é‚€è¯·</div><div class="line">[2017/3/2 12:21:34:594]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 3335, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248, operation : APPLY_DECLINE, from : lz1, tos : [ lz2 ] &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">ç¦»å¼€ç¾¤ç»„</div><div class="line">[2017/3/2 11:7:24:803]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 1031, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1482203912329, operation : LEAVE, from : lz1 &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 11:7:25:183]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304338138476578856, timestamp : 1488424044686, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1482203912329@conference.easemob.com, operation : LEAVE, from : easemob-demo#chatdemoui_lz1@easemob.com, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304338138476578856, queue : 1482203912329@conference.easemob.com, timestamp : 1488424044990 &#125; &#125;</div><div class="line"></div><div class="line">ç¾¤ç»„è¸¢äºº</div><div class="line">[2017/3/2 11:30:40:684]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 1799, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1483610597352, operation : KICK, from : lz1, tos : [ lz2 ] &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 11:30:41:122]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304344134942984200, timestamp : 1488425440851, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1483610597352@conference.easemob.com, operation : ABSENCE, from : easemob-demo#chatdemoui_lz2@easemob.com, is_chatroom : false &#125; &#125; ], next_key : 304344134942984200, queue : 1483610597352@conference.easemob.com, timestamp : 1488425440955 &#125; &#125;</div><div class="line"></div><div class="line">æœåŠ¡å™¨åˆ é™¤ç¾¤ç»„</div><div class="line">[2017/3/2 13:0:44:727]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304367343482439644, timestamp : 1488430844502, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488427655248@conference.easemob.com, operation : DESTROY, from : easemob-demo#chatdemoui_ç³»ç»Ÿç®¡ç†å‘˜@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], is_chatroom : false, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304367343482439644, queue : 1488427655248@conference.easemob.com, timestamp : 1488430844552 &#125; &#125;</div><div class="line"></div><div class="line">å±è”½ç¾¤æ¶ˆæ¯</div><div class="line">[2017/3/2 13:10:23:189]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 5895, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488431342804, operation : BLOCK, from : lz1 &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 13:10:23:278]: log: level: 1, area: 1, ChatClient::handleSync begin</div><div class="line">[2017/3/2 13:10:23:278]: log: level: 1, area: 1, ChatClient::handleSync complete: response</div><div class="line">[2017/3/2 13:10:23:310]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304369828473346088, timestamp : 1488431423075, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488431342804@conference.easemob.com, operation : BLOCK, from : easemob-demo#chatdemoui_lz1@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304369828473346088, queue : 1488431342804@conference.easemob.com, timestamp : 1488431423128 &#125; &#125;</div><div class="line"></div><div class="line">è§£é™¤å±è”½ç¾¤æ¶ˆæ¯</div><div class="line">[2017/3/2 15:3:29:333]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 521, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488431342804, operation : UNBLOCK, from : lz1 &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 15:3:32:900]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304398975526508532, timestamp : 1488438209409, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_1488431342804@conference.easemob.com, operation : UNBLOCK, from : easemob-demo#chatdemoui_lz1@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304398975526508532, queue : 1488431342804@conference.easemob.com, timestamp : 1488438210535 &#125; &#125;</div></pre></td></tr></table></figure></p>
<h3 id="èŠå¤©å®¤"><a href="#èŠå¤©å®¤" class="headerlink" title="èŠå¤©å®¤"></a>èŠå¤©å®¤</h3><p>å•å•ä»æ—¥å¿—çœ‹ï¼Œè¿™äº›æ“ä½œå…¶å®å’Œç¾¤ç»„çš„éƒ½ä¸€æ ·</p>
<p>å…³é”®è¯ï¼š<code>MUC</code>,<code>JOIN</code>,<code>PRESENCE</code>,<code>ABSENCE</code>,<code>KICK</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">è‡ªå·±åŠ å…¥èŠå¤©å®¤</div><div class="line">[2017/3/2 12:46:36:668]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 5383, to : @easemob.com, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_3759501541378@conference.easemob.com, operation : JOIN, from : lz1 &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">æ”¶åˆ°åˆ«äººåŠ å…¥èŠå¤©å®¤çš„å›è°ƒ</div><div class="line">[2017/3/2 12:53:40:186]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304365519564179492, timestamp : 1488430419846, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_3759501541378@conference.easemob.com, operation : PRESENCE, from : easemob-demo#chatdemoui_lz2@easemob.com, is_chatroom : true &#125; &#125; ], next_key : 304365519564179492, queue : 3759501541378@conference.easemob.com, timestamp : 1488430420020 &#125; &#125;</div><div class="line"></div><div class="line">å…¶ä»–äººç¦»å¼€èŠå¤©å®¤å›è°ƒ</div><div class="line">[2017/3/2 12:56:56:655]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304366363252623336, timestamp : 1488430616269, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_3759501541378@conference.easemob.com, operation : ABSENCE, from : easemob-demo#chatdemoui_lz2@easemob.com, is_chatroom : true &#125; &#125; ], next_key : 304366363252623336, queue : 3759501541378@conference.easemob.com, timestamp : 1488430616481 &#125; &#125;</div><div class="line"></div><div class="line">è‡ªå·±è¢«åå°è¸¢å‡ºèŠå¤©å®¤</div><div class="line">[2017/3/2 12:58:30:329]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304366766241351692, timestamp : 1488430710093, ns : MUC, payload : &#123; muc_id : easemob-demo#chatdemoui_3759501541378@conference.easemob.com, operation : KICK, from : easemob-demo#chatdemoui_ç³»ç»Ÿç®¡ç†å‘˜@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], is_chatroom : true, status : &#123; error_code : 0, description :  &#125; &#125; &#125; ], next_key : 304366766241351692, queue : 3759501541378@conference.easemob.com, timestamp : 1488430710153 &#125; &#125;</div></pre></td></tr></table></figure></p>
<h3 id="è”ç³»äºº"><a href="#è”ç³»äºº" class="headerlink" title="è”ç³»äºº"></a>è”ç³»äºº</h3><p>å…³é”®è¯ï¼š<code>ROSTER</code>,<code>ADD</code>,<code>REMOVE</code>,<code>ACCEPT</code>,<code>REMOTE_ACCEPT</code>,<code>DECLINE</code>,<code>REMOTE_DECLINE</code>,<code>BAN</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">æ”¶åˆ°æ·»åŠ è¯·æ±‚</div><div class="line">[2017/3/2 12:31:51:693]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304359900245395412, timestamp : 1488429111488, ns : ROSTER, payload : &#123; operation : ADD, from : easemob-demo#chatdemoui_lz2@easemob.com/mobile, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], reason : åŠ ä¸ªå¥½å‹å‘— &#125; &#125; ], next_key : 304359900245395412, queue : @easemob.com, timestamp : 1488429111530 &#125; &#125;</div><div class="line"></div><div class="line">åˆ é™¤ï¼š</div><div class="line">[2017/3/2 12:31:34:502]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 3847, to : @easemob.com, ns : ROSTER, payload : &#123; operation : REMOVE, tos : [ easemob-demo#chatdemoui_lz2 ], reason : , bi_direction : 0 &#125; &#125; &#125; &#125;</div><div class="line">[2017/3/2 12:31:34:628]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304359826958321704, timestamp : 1488429094423, ns : ROSTER, payload : &#123; operation : REMOVE, from : easemob-demo#chatdemoui_lz2@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com/mobile ], roster_ver : DB5BEDE0B3C0828FF9C2B7E2C119D30AC8AA66E4 &#125; &#125; ], next_key : 304359826958321704, queue : @easemob.com, timestamp : 1488429094467 &#125; &#125;</div><div class="line"></div><div class="line">åŒæ„ï¼š</div><div class="line">[2017/3/2 12:40:33:251]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304362140305721384, timestamp : 1488429633032, ns : ROSTER, payload : &#123; operation : ACCEPT, from : easemob-demo#chatdemoui_lz2@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com/mobile ], roster_ver : 31A3278F5D16C2726689A176C39D81FF9961647A &#125; &#125; ], next_key : 304362140305721384, queue : @easemob.com, timestamp : 1488429633077 &#125; &#125;</div><div class="line"></div><div class="line">è¢«åŒæ„ï¼š</div><div class="line">[2017/3/2 12:42:59:308]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304362767614216148, timestamp : 1488429779090, ns : ROSTER, payload : &#123; operation : REMOTE_ACCEPT, from : easemob-demo#chatdemoui_lz2@easemob.com/mobile, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], roster_ver : 13B1298E1FAF70683EB467693584B2FD74CBDC6D &#125; &#125; ], next_key : 304362767614216148, queue : @easemob.com, timestamp : 1488429779133 &#125; &#125;</div><div class="line"></div><div class="line">æ‹’ç»ï¼š</div><div class="line">[2017/3/2 12:39:52:931]: log: level: 1, area: 1, SEND:</div><div class="line">&#123; verison : MSYNC_V1, compress_algorimth : 0, command : SYNC, payload : &#123; meta : &#123; id : 4103, to : @easemob.com, ns : ROSTER, payload : &#123; operation : DECLINE, tos : [ easemob-demo#chatdemoui_lz2 ], reason : , bi_direction : 0 &#125; &#125; &#125; &#125;</div><div class="line"></div><div class="line">è¢«æ‹’ç»ï¼š</div><div class="line">[2017/3/2 12:42:59:308]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304362767614216148, timestamp : 1488429779090, ns : ROSTER, payload : &#123; operation : REMOTE_DECLINE, from : easemob-demo#chatdemoui_lz2@easemob.com/mobile, tos : [ easemob-demo#chatdemoui_lz1@easemob.com ], roster_ver : 13B1298E1FAF70683EB467693584B2FD74CBDC6D &#125; &#125; ], next_key : 304362767614216148, queue : @easemob.com, timestamp : 1488429779133 &#125; &#125;</div><div class="line"></div><div class="line">åŠ å…¥é»‘åå•</div><div class="line">[2017/3/2 12:43:18:539]: log: level: 1, area: 1, RECV:</div><div class="line">&#123; verison : MSYNC_V1, command : SYNC, payload : &#123; status : &#123; error_code : 0 &#125;, metas : [ &#123; id : 304362850200061992, timestamp : 1488429798324, ns : ROSTER, payload : &#123; operation : BAN, status : &#123; error_code : 0 &#125;, from : easemob-demo#chatdemoui_lz2@easemob.com, tos : [ easemob-demo#chatdemoui_lz1@easemob.com/mobile ] &#125; &#125; ], next_key : 304362850200061992, queue : @easemob.com, timestamp : 1488429798362 &#125; &#125;</div></pre></td></tr></table></figure></p>
<h2 id="é€šè¯ç›¸å…³"><a href="#é€šè¯ç›¸å…³" class="headerlink" title="é€šè¯ç›¸å…³"></a>é€šè¯ç›¸å…³</h2><p>ç”±äºé€šè¯åŠŸèƒ½å¤§éƒ¨åˆ†éƒ½æ˜¯ç”±åº•å±‚å®ç°ï¼Œè¿™è¾¹æš‚æ—¶æ— æ³•çœ‹æ‡‚ï¼Œä¹Ÿå°±å…ˆä¸å†™äº†ğŸ˜ğŸ˜</p>
<h2 id="ç»“æŸè¯­"><a href="#ç»“æŸè¯­" class="headerlink" title="ç»“æŸè¯­"></a>ç»“æŸè¯­</h2><p>æ²¡æœ‰ä»€ä¹ˆèƒ½ä¸€çœ¼çœ‹å‡ºé”™è¯¯çš„æ–¹æ³•ï¼Œåªè¦è®°ä½æ­£å¸¸çš„æ—¥å¿—æ˜¯ä»€ä¹ˆæ ·çš„ï¼Œä»¥ååªè¦é‡åˆ°é”™è¯¯çš„æ—¥å¿—å°±çŸ¥é“è¿™ä¸æ­£å¸¸äº†ï¼Œæ‰€æœ‰èƒ½é€šè¿‡æ—¥å¿—çœ‹å‡ºæ¥é—®é¢˜çš„é—®é¢˜ï¼Œéƒ½ä¸æ˜¯è¯´ä¸€ä¸‹æ ¹æ®å“ªä¸€ç‚¹æ—¥å¿—å°±èƒ½çŸ¥é“çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯éœ€è¦è”ç³»ä¸‹ä¸Šä¸‹æ–‡çš„æ—¥å¿—ï¼Œç„¶åç»“åˆåœºæ™¯æ‰å¥½åˆ†æ</p>
<p>æ²¡ä»€ä¹ˆæŠ•æœºå–å·§çš„æ–¹å¼ï¼Œå…¶å®éƒ½æ˜¯ç†Ÿèƒ½ç”Ÿå·§ï¼Œç„¶åå¤§å®¶äº’ç›¸äº¤æµï¼Œåˆ†äº«è‡ªå·±æ‰€çŸ¥é“çš„</p>
<p>æœ€åå¸Œæœ›è¿™ä¸€ç¯‡åˆ†æèƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œ</p>
<p>é”™è¯¯ç å‚è€ƒï¼š<a href="http://www.easemob.com/apidoc/android/chat3.0/classcom_1_1hyphenate_1_1_e_m_error.html" target="_blank" rel="external">ç¯ä¿¡å®˜æ–¹ API æ–‡æ¡£ Error</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/Android/" rel="tag"># Android</a>
          
            <a href="/blog/tags/Easemob/" rel="tag"># Easemob</a>
          
            <a href="/blog/tags/SDK/" rel="tag"># SDK</a>
          
            <a href="/blog/tags/IM/" rel="tag"># IM</a>
          
            <a href="/blog/tags/Log/" rel="tag"># Log</a>
          
            <a href="/blog/tags/Hyphenate/" rel="tag"># Hyphenate</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2017/03/android-daemon-service-1488942411000.html" rel="next" title="Android å®ˆæŠ¤è¿›ç¨‹çš„å®ç°æ–¹å¼">
                <i class="fa fa-chevron-left"></i> Android å®ˆæŠ¤è¿›ç¨‹çš„å®ç°æ–¹å¼
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2017/03/android-library-im-sdk-easemob-v2-1489749784000.html" rel="prev" title="å…³äºç¯ä¿¡2.xSDKæ—¥å¿—ç®€å•åˆ†æ">
                å…³äºç¯ä¿¡2.xSDKæ—¥å¿—ç®€å•åˆ†æ <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>

    <div>
      
        
  <div id="reward">
    <div reward_comment>
      <p>é˜¿å¼¥é™€ä½›ï¼Œæ–½ä¸»ï¼Œä½ å¦‚æ­¤å™¨å®‡è½©æ˜‚ï¼Œä¸æ¥äºŒä¸¤ ~</p>
    </div>
    <button id="reward_button" disable="enable" onclick="var qr = document.getElementById('reward_qr'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>~ é˜¿å¼¥é™€ä½› ~</span>
    </button>
    <div id="reward_qr" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="http://lzan13.qiniudn.com/blog/upload/images/qr-wechat-2.jpg" alt="lzan13 WeChat Pay"/>
          <p>å¾®ä¿¡æ”¯æŒ</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="http://lzan13.qiniudn.com/blog/upload/images/qr-alipay-2.jpg" alt="lzan13 Alipay"/>
          <p>æ”¯ä»˜å®æ”¯æŒ</p>
        </div>
      
    </div>
  </div>


      
    </div>
  </article>



    <div class="post-spread">
      
    </div>
  </div>

          
          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html"
           data-title="å…³äºç¯ä¿¡3.xSDKæ—¥å¿—ç®€å•åˆ†æ" data-url="http://melove.net/blog/2017/03/android-library-im-sdk-hyphenate-v3-1489749364000.html">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            æ–‡ç« ç›®å½•
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            ç«™ç‚¹æ¦‚è§ˆ
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/blog/images/avatar.png"
               alt="lzan13" />
          <p class="site-author-name" itemprop="name">lzan13</p>
          <p class="site-description motion-element" itemprop="description">â¤ï¸ ç¼–ç¨‹ â¤ï¸ åŠ¨æ¼« â¤ï¸ æŠ˜è…¾ â¤ï¸ You  Androidå¼€å‘ç¨‹åºå‘˜ï¼Œè®¾è®¡å‰ç«¯çˆ±å¥½è€…</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/blog/archives">
                <span class="site-state-item-count">78</span>
                <span class="site-state-item-name">æ—¥å¿—</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/blog/categories">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">åˆ†ç±»</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/blog/tags">
                <span class="site-state-item-count">143</span>
                <span class="site-state-item-name">æ ‡ç­¾</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/blog/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lzan13" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/lzan13" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://weibo.com/lzan13" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.zhihu.com/people/lzan13" target="_blank" title="Zhihu">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  Zhihu
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#å‰è¨€"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç½‘ç»œç›¸å…³"><span class="nav-number">2.</span> <span class="nav-text">ç½‘ç»œç›¸å…³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SDK-çš„åˆå§‹åŒ–"><span class="nav-number">2.1.</span> <span class="nav-text">SDK çš„åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ‰‹åŠ¨ç™»å½•"><span class="nav-number">2.2.</span> <span class="nav-text">æ‰‹åŠ¨ç™»å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è‡ªåŠ¨ç™»å½•"><span class="nav-number">2.3.</span> <span class="nav-text">è‡ªåŠ¨ç™»å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é€€å‡ºç™»å½•"><span class="nav-number">2.4.</span> <span class="nav-text">é€€å‡ºç™»å½•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¿ƒè·³å®šæ—¶å™¨"><span class="nav-number">2.5.</span> <span class="nav-text">å¿ƒè·³å®šæ—¶å™¨</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#é“¾æ¥ç›‘å¬ä¸é‡è¿"><span class="nav-number">2.6.</span> <span class="nav-text">é“¾æ¥ç›‘å¬ä¸é‡è¿</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è¢«è¸¢-amp-å¼ºåˆ¶ä¸‹çº¿-amp-ç§»é™¤è´¦æˆ·"><span class="nav-number">2.7.</span> <span class="nav-text">è¢«è¸¢&å¼ºåˆ¶ä¸‹çº¿&ç§»é™¤è´¦æˆ·</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿—-TODO"><span class="nav-number">2.8.</span> <span class="nav-text">ç½‘ç»œæœ‰é—®é¢˜çš„æ—¥å¿— TODO</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ¨é€ç›¸å…³"><span class="nav-number">2.9.</span> <span class="nav-text">æ¨é€ç›¸å…³</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ¶ˆæ¯ç›¸å…³"><span class="nav-number">3.</span> <span class="nav-text">æ¶ˆæ¯ç›¸å…³</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å‘é€æ¶ˆæ¯"><span class="nav-number">3.1.</span> <span class="nav-text">å‘é€æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æ”¶åˆ°æ–°æ¶ˆæ¯"><span class="nav-number">3.2.</span> <span class="nav-text">æ”¶åˆ°æ–°æ¶ˆæ¯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ç¾¤ç»„å…¶ä»–æ“ä½œ"><span class="nav-number">3.3.</span> <span class="nav-text">ç¾¤ç»„å…¶ä»–æ“ä½œ</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#èŠå¤©å®¤"><span class="nav-number">3.4.</span> <span class="nav-text">èŠå¤©å®¤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è”ç³»äºº"><span class="nav-number">3.5.</span> <span class="nav-text">è”ç³»äºº</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é€šè¯ç›¸å…³"><span class="nav-number">4.</span> <span class="nav-text">é€šè¯ç›¸å…³</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç»“æŸè¯­"><span class="nav-number">5.</span> <span class="nav-text">ç»“æŸè¯­</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2013 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lzan13</span>
</div>


<div class="powered-by">
  ç”± <a class="theme-link" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨
</div>

<div class="theme-info">
  ä¸»é¢˜ -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/blog/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/blog/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"lzan13"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/blog/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/blog/js/src/hook-duoshuo.js"></script>
  













  
  

  

  

  

  


</body>
</html>
